# templates/index.html
<!DOCTYPE html>
<html lang="{{ 'es' if lang == 'es' else 'en' }}">
<head>
    <meta charset="UTF-8">
    <title>VIPER DMA SALES TRACKER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #0f111a; color: white; }
        .card { background-color: #1c1e2a; border: none; color: white; }
        .btn-yellow { background-color: #ffd500; border: none; color: black; font-weight: bold; }
        .table-dark th, .table-dark td { color: white; }
        .switch-lang { position: absolute; top: 10px; right: 20px; }
    </style>
</head>
<body>
<div class="container py-4">
    <div class="switch-lang">
        <a href="?lang={{ 'en' if lang == 'es' else 'es' }}" class="btn btn-sm btn-outline-light">
            {{ 'EN' if lang == 'es' else 'ES' }}
        </a>
    </div>
    <h1 class="mb-4">⚡ VIPER DMA SALES TRACKER</h1>
    <div class="row text-center mb-4">
        <div class="col"><div class="card p-3">{{ 'Ganancias Totales' if lang == 'es' else 'Total Profit' }}<br><strong>${{ profit }}</strong></div></div>
        <div class="col"><div class="card p-3">{{ 'Ingresos Totales' if lang == 'es' else 'Total Income' }}<br><strong>${{ income }}</strong></div></div>
        <div class="col"><div class="card p-3">{{ 'Costo Total' if lang == 'es' else 'Total Cost' }}<br><strong style="color:#f66">${{ cost }}</strong></div></div>
    </div>
    <form action="/add" method="post" class="card p-4 mb-4">
        <h4>{{ 'Añadir venta' if lang == 'es' else 'Add Sale' }}</h4>
        <input type="number" step="any" name="product" class="form-control mb-2" placeholder="{{ 'Costo producto ($)' if lang == 'es' else 'Product cost ($)' }}">
        <input type="number" step="any" name="flash" class="form-control mb-2" placeholder="Flash fee ($)">
        <input type="number" step="any" name="install" class="form-control mb-2" placeholder="{{ 'Instalación ($)' if lang == 'es' else 'Installation ($)' }}">
        <input type="number" name="cantidad" class="form-control mb-2" placeholder="Cantidad" value="1">
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="sub">
            <label class="form-check-label">{{ 'Incluye suscripción' if lang == 'es' else 'Includes subscription' }}</label>
        </div>
        <input type="text" name="tag" class="form-control mb-2" placeholder="{{ 'Etiqueta' if lang == 'es' else 'Label' }}">
        <button class="btn btn-yellow w-100">{{ 'Añadir Venta' if lang == 'es' else 'Add Sale' }}</button>
    </form>
    <table class="table table-dark table-bordered text-center">
        <thead>
        <tr>
            <th>{{ 'FECHA' if lang == 'es' else 'DATE' }}</th>
            <th>CANT.</th><th>FLASH</th><th>INSTALL</th><th>SUB</th><th>TAG</th><th>{{ 'VENTA' if lang == 'es' else 'SALE' }}</th>
            <th>COSTO</th><th>SUB GANANCIA</th><th>TOTAL</th><th>{{ 'GANANCIA' if lang == 'es' else 'PROFIT' }}</th><th>X</th>
        </tr>
        </thead>
        <tbody>
        {% for s in sales %}
        <tr>
            <td>{{ s.timestamp }}</td><td>{{ s.cantidad }}</td><td>{{ s.flash }}</td><td>{{ s.install }}</td><td>{{ s.sub }}</td><td>{{ s.tag }}</td>
            <td>{{ s.venta }}</td><td>{{ s.cost }}</td><td>{{ s.ganancia_sub }}</td><td>{{ s.total }}</td><td>{{ s.profit }}</td>
            <td><form action="/delete/{{ loop.index0 }}" method="post"><button class="btn btn-sm btn-danger">X</button></form></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <a href="/export" class="btn btn-outline-warning">{{ 'Exportar CSV' if lang == 'es' else 'Export CSV' }}</a>
</div>
</body>
</html>
